<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Creative ,Challenging and Cogitative">
<meta property="og:url" content="http://houzhi.me/page/7/index.html">
<meta property="og:site_name" content="Creative ,Challenging and Cogitative">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Creative ,Challenging and Cogitative">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://houzhi.me/page/7/"/>





  <title>Creative ,Challenging and Cogitative</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Creative ,Challenging and Cogitative</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/04/17/using-fps-meter-to-obtain-fps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/04/17/using-fps-meter-to-obtain-fps/" itemprop="url">利用Fps meter 的pipe来获取android 的 Fps值</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-04-17T00:00:00+08:00">
                2014-04-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>========================<br>前几天实习中，需要根据利用FPS Meter 来获取android 当前的FPS值。这个idea是他们给的，我需要去实现。网上有篇博客[1]对FPS meter 进行了比较深入的讲述。根据那篇博客所讲的，FPS meter 是利用native 将fps 值不断地写入到pipe当中，然后java层的服务不断地从pipe中获取。首先回顾一下pipe</p>
<h4 id="Pipe"><a href="#Pipe" class="headerlink" title="Pipe"></a>Pipe</h4><p>Linux 进程间的通信包括Pipe（管道），命名管道（FIFO）与信号（Signal）。so，其实Pipe就是用来进行进程间通信的。下图所示，就是Pipe的过程</p>
<p><img src="/image/2012110216160766.jpg" alt=""></p>
<p>管道是由内核管理的一个缓冲区，相当于我们放入内存中的一个纸条，管道的一端连接着一个进程的输入，管道的另外一端连着另外一个进程的输出。一个进程往管道中放入信息，另外一个进程从管道中取出信息。当管道中没有信息的时候，从管道中取出信息的进程会等待，当管道中信息满了的时候，向管道中写入信息的进程会等待，知道管道非满。当两个进程都结束的时候，管道会消失。</p>
<h4 id="FPS-meter-的管道使用"><a href="#FPS-meter-的管道使用" class="headerlink" title="FPS meter 的管道使用"></a>FPS meter 的管道使用</h4><p>FPS meter程序中，他是通过一个native 进程，通过surfaceflinger 来得到 android 当前的FPS 值，让后将该值写入到pipe 当中。在FPS Meter 的java 程序中，直接读取Pipe，这样就可以运行了。<br>在FPS meter 的pipe 中，他是将pipe 数据作为一个4个int 型的数据的。</p>
<h4 id="cat-获取pipe值。"><a href="#cat-获取pipe值。" class="headerlink" title="cat 获取pipe值。"></a>cat 获取pipe值。</h4><p>可以将pipe当成一个文件，直接用cat 命令来读取pipe 的值。但是直接用cat 读取的时候，是可能会乱码的，cat 有时候并没有将四个32位的数的 解析成int。不过用cat 可以读取信息了。那解析我们可以自己做。再怎么着，pipe中也都是32 * 4 个的位罢了。用java 下面的代码直接就可以读取了：</p>
<pre><code>String shellCommand = &quot;adb shell cat /data/data/com.aatt.fpsm/pipe&quot;;
final long  maxBase = (int) Math.pow(2, 32);
try {
    device.executeShellCommand(shellCommand, new IShellOutputReceiver() {

        @Override
        public boolean isCancelled() {
            return false;
        }

        @Override
        public void flush() {

        }

        @Override
        public void addOutput(byte[] data,  int offset,  int length) {

            int result = 0 ;

            for(int i = offset ; i!=offset + length ; i++){
                result += data[i] *Math.pow(maxBase ,i );
            }
            System.out.println(result);
        }
    });
} catch (Exception e) {
    e.printStackTrace();
}
</code></pre><p>这样就可以将Pipe中的信息转化成int。</p>
<p>这样读取之后，其实还有一个小小的疑惑，虽然不影响获取值，但是还是得思考。我们自己写了一个程序去获取pipe的时候，FPS Meter 就只显示为0。认真想想Pipe 的原理就知道了。我们的程序已经将Pipe的值读取出来了。这样Pipe里面就没有任何值了，那FPS Meter 就无法从中读取值了。不过这里也有一个疑问，其实FPS meter 也是一直在读取的，优先顺序会是怎样的，从结果来看，基本是我们的程序获取了Pipe的值。或许是因为shell 级别高。但是直接用shell的时候，FPS meter 显示的值不会为0.这地方很值得思考。可惜我对这些不是很了解。</p>
<hr>
<p>梦想在哪？</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/03/22/android-slidelistener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/22/android-slidelistener/" itemprop="url">android 滑动监听删除</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-03-22T00:00:00+08:00">
                2014-03-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          android 滑动删除的实现
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/03/22/android-slidelistener/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/03/15/android-soft-keyboard-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/android-soft-keyboard-summary/" itemprop="url">android 软键盘使用总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-03-15T00:00:00+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          对于软键盘的基本使用跟一些常出现的问题的总结
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/03/15/android-soft-keyboard-summary/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/03/04/learn-python-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/04/learn-python-note/" itemprop="url">python 学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-03-04T00:00:00+08:00">
                2014-03-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          python 简单入门教程的学习笔记
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2014/03/04/learn-python-note/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/03/01/android-xml-paraser/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/01/android-xml-paraser/" itemprop="url">android xml 解析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-03-01T00:00:00+08:00">
                2014-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/xml/" itemprop="url" rel="index">
                    <span itemprop="name">xml</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h3><p>xml 是目前使用范围最广的数据传输类型。这几天在弄的一个项目，就是用xml来进行数据传输的，所以特地把所有的xml 解析方式进行学习总结一下。</p>
<h3 id="DOM-方式解析"><a href="#DOM-方式解析" class="headerlink" title="DOM 方式解析"></a>DOM 方式解析</h3><p>Dom方式解析是将整个xml文档一次性全部读取出来，进行解析。可以想象在读入的时候，就已经将整个文档解析好了，之后可以任意地去读取出来了。</p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>这种方式很显然，读取出来方便，写入也方便。</p>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>一次性就将整个文档读取了，so，比较耗费内存。如果文档特别大，那就比较窘迫了。所以该解析方式适合文档相对较小的。对于手机，显然不合适。</p>
<h3 id="代码Sample"><a href="#代码Sample" class="headerlink" title="代码Sample"></a>代码Sample</h3><p>xml文档：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;sample&gt;
&lt;item id=&quot;0&quot; &gt;DOM&lt;/item&gt;
&lt;item id=&quot;1&quot; &gt;SAX&lt;/item&gt;
&lt;item id=&quot;2&quot; &gt;Pull&lt;/item&gt;
&lt;/sample&gt;
</code></pre><p>以下代码都是从网上参考来的，仅供参考。</p>
<pre><code>public static List&lt;channel&gt; getChannelList(InputStream stream)
{
    List&lt;channel&gt; list=new ArrayList&lt;channel&gt;();

    //得到 DocumentBuilderFactory 对象, 由该对象可以得到 DocumentBuilder 对象
    DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();

    try {
        //得到DocumentBuilder对象
        DocumentBuilder builder=factory.newDocumentBuilder();
        //得到代表整个xml的Document对象
        Document document=builder.parse(stream);
        //得到 &quot;根节点&quot;
        Element root=document.getDocumentElement();
        //获取根节点的所有items的节点
        NodeList items=root.getElementsByTagName(&quot;item&quot;);  
        //遍历所有节点
        for(int i=0;i&lt;items.getLength();i++)
        {
            channel chann=new channel();
            Element item=(Element)items.item(i);
            chann.setId(item.getAttribute(&quot;id&quot;));
            chann.setUrl(item.getAttribute(&quot;url&quot;));
            chann.setName(item.getFirstChild().getNodeValue());
            list.add(chann);
        }

    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return list;
}
</code></pre><p>###SAX 方式解析<br>sax 方式解析，是基于事件驱动的。它分成两部分，一个是xml解析器，一个事件处理器。分别对应XMLReader 和 Handler。</p>
<h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><p>sax不用一次性读取整个文档，很显然基于事件驱动，可以不用一次性耗费那么内存。而且，SAX解析方式更加具有结构性将xml解析器跟事件处理区分开，有人说会更麻烦，个人觉得见人见智吧，其实结构性好了，更方便使用。</p>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><p>一个节点一个节点地读入，如果遇到文档小，显然没有Dom那么方便。</p>
<h4 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h4><pre><code>private List&lt;Sample&gt; getSampleList() throws ParserConfigurationException, SAXException, IOException
{
    //实例化一个SAXParserFactory对象
    SAXParserFactory factory=SAXParserFactory.newInstance();
    SAXParser parser;
    //实例化SAXParser对象，创建XMLReader对象，解析器
    parser=factory.newSAXParser();
    XMLReader xmlReader=parser.getXMLReader();
    //实例化handler，事件处理器
    SAXPraserHelper helperHandler=new SAXPraserHelper();
    //解析器注册事件
    xmlReader.setContentHandler(helperHandler);
    //读取文件流
    InputStream stream=getResources().openRawResource(R.raw.channels);
    InputSource is=new InputSource(stream);
    //解析文件
    xmlReader.parse(is);
    return helperHandler.getList();
}
</code></pre><p>handle</p>
<pre><code>public class SAXPraserHelper extends DefaultHandler {

final int ITEM = 0x0005;

List&lt;Sample&gt; list;
channel chann;
int currentState = 0;

public List&lt;Sample&gt; getList() {
    return list;
}

/*
 * 接口字符块通知
*/
@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub
// super.characters(ch, start, length);
    String theString = String.valueOf(ch, start, length);
    if (currentState != 0) {
        chann.setName(theString);
        currentState = 0;
    }
    return;
}

/*
 * 接收文档结束通知
*/
@Override
public void endDocument() throws SAXException {
    // TODO Auto-generated method stub
    super.endDocument();
}

/*
 * 接收标签结束通知
*/
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equals(&quot;item&quot;))
        list.add(chann);
}

/*
 * 文档开始通知
*/
@Override
public void startDocument() throws SAXException {
    // TODO Auto-generated method stub
    list = new ArrayList&lt;Sample&gt;();
}

/*
 * 标签开始通知
*/
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    chann = new channel();
    if (localName.equals(&quot;item&quot;)) {
        for (int i = 0; i &lt; attributes.getLength(); i++) {
            if (attributes.getLocalName(i).equals(&quot;id&quot;)) {
                chann.setId(attributes.getValue(i));
            } else if (attributes.getLocalName(i).equals(&quot;url&quot;)) {
                chann.setUrl(attributes.getValue(i));
            }
        }
        currentState = ITEM;
        return;
    }
    currentState = 0;
    return;
}
</code></pre><p>###Pull 方式解析<br>也是基于事件驱动的，但是与sax不同。它是开始解析后，可以一次一次地调用next来获取下一个解析事件，这样就多了自主地控制了。</p>
<h4 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h4><p>从某些角度上来看，Pull显然是要简单些。</p>
<h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><p>跟SAX 优点类似吧。</p>
<h4 id="Sample-1"><a href="#Sample-1" class="headerlink" title="Sample"></a>Sample</h4><pre><code>private List&lt;Map&lt;String, String&gt;&gt; getData() {
    List&lt;Map&lt;String, String&gt;&gt; list = new ArrayList&lt;Map&lt;String, String&gt;&gt;();
    XmlResourceParser xrp = getResources().getXml(R.xml.channels);

    try {
        // 直到文档的结尾处
        while (xrp.getEventType() != XmlResourceParser.END_DOCUMENT) {
            // 如果遇到了开始标签
            if (xrp.getEventType() == XmlResourceParser.START_TAG) {
                String tagName = xrp.getName();// 获取标签的名字
                if (tagName.equals(&quot;item&quot;)) {
                    Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
                    String id = xrp.getAttributeValue(null, &quot;id&quot;);// 通过属性名来获取属性值
                    map.put(&quot;id&quot;, id);
                    map.put(&quot;name&quot;, xrp.nextText());
                    list.add(map);
                }
            }
            xrp.next();// 获取解析下一个事件
        }
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return list;
}
</code></pre><p>###参考</p>
<ol>
<li><a href="http://www.cnblogs.com/JerryWang1991/archive/2012/02/24/2365507.html" target="_blank" rel="external">http://www.cnblogs.com/JerryWang1991/archive/2012/02/24/2365507.html</a></li>
</ol>
<hr>
<h3 id="小悟诗词"><a href="#小悟诗词" class="headerlink" title="小悟诗词"></a>小悟诗词</h3><blockquote>
<p>穷则变,变则通，通则久 —《周易·系辞下》</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/02/23/android-xml-compare-with-json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/02/23/android-xml-compare-with-json/" itemprop="url">xml 与json 的比较</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-02-23T00:00:00+08:00">
                2014-02-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术手段/" itemprop="url" rel="index">
                    <span itemprop="name">技术手段</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近接触一个项目的代码，看到里面的数据传输方式都是用xml。之前一直都是用json进行数据传输，不禁对这两种方式的比较进行了了解了一番，根据网上看到的，比较全面的比较以及自己使用过程中的思考。</p>
<hr>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>JSON（Javascript Object Notation）定义：</p>
<p>一种轻量级的数据交换格式，具有良好的可读和便于快速编写的特性。可在不同平台之间进行数据交换。JSON 采用兼容性很高的文本格式，同时也具备C语言体系的行为。</p>
<p>XML定义</p>
<p>扩展标记语言（Extensible Markup Language，XML），用于标记电子文件使其具有结构性的标记语言，可以用来标记数据、定义数据类型，是一种允许用户对自己的标记语言进行定义的源语言。XML是标准通用标记语言（SGML）的子集，非常适合Web传输。XML提供统一的方法来描述和交换独立于应用或供应商的结构化数据。</p>
<h3 id="优劣性"><a href="#优劣性" class="headerlink" title="优劣性"></a>优劣性</h3><h4 id="XML："><a href="#XML：" class="headerlink" title="XML："></a>XML：</h4><p>优点：</p>
<ul>
<li>格式统一，符合标准；</li>
<li>容易与其他系统进行远程交互，数据传输比较方便。</li>
</ul>
<p>缺点：</p>
<ul>
<li>XML文件庞大，文件格式复杂，传输占带宽；</li>
<li>服务器端和客户端都需要花费大量代码来解析XML，导致服务器端和客户端代码变得异常复杂且不易维护；</li>
<li>客户端不同浏览器之间解析XML的方式不一致，需要重复编写很多代码；</li>
<li>服务器端和客户端解析XML花费较多的资源和时间。</li>
</ul>
<h5 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h5><p>优点：</p>
<ul>
<li>数据格式比较简单，易于读写，格式都是压缩的，占用带宽小；</li>
<li><p>易于解析，客户端JavaScript可以简单的通过eval_r()进行JSON数据的读取；</p>
<pre><code>object.key //在javascript中，完全可以直接读取， jsonObject.key就可以得到数据
</code></pre></li>
<li>支持多种语言，包括ActionScript, C, C#, ColdFusion, Java, JavaScript, Perl, PHP, Python, Ruby等服务器端语言，便于服务器端的解析；</li>
<li>在PHP世界，已经有PHP-JSON和JSON-PHP出现了，偏于PHP序列化后的程序直接调用，PHP服务器端的对象、数组等能直接生成JSON格式，便于客户端的访问提取；</li>
<li>因为JSON格式能直接为服务器端代码使用，大大简化了服务器端和客户端的代码开发量，且完成任务不变，并且易于维护。</li>
</ul>
<p>缺点：</p>
<ol>
<li>没有XML格式这么推广的深入人心和喜用广泛，没有XML那么通用性；<br>json出现地比较晚，但越来越受欢迎</li>
<li>JSON格式目前在Web Service中推广还属于初级阶段</li>
</ol>
<h5 id="【XML】和【JSON】的优缺点对比："><a href="#【XML】和【JSON】的优缺点对比：" class="headerlink" title="【XML】和【JSON】的优缺点对比："></a>【XML】和【JSON】的优缺点对比：</h5><ol>
<li>在可读性方面，JSON和XML的数据可读性基本相同。JSON和XML的可读性可谓不相上下，一边是建议的语法，一边是规范的标签形式，很难分出胜负。</li>
<li>在可扩展性方面，XML天生有很好的扩展性，JSON当然也有，没有什么是XML能扩展，JSON不能的。</li>
<li>在编码难度方面，XML有丰富的编码工具，比如Dom4j、JDom等，JSON也有json.org提供的工具，但是JSON的编码明显比XML容易许多，即使不借助工具也能写出JSON的代码，可是要写好XML就不太容易了。</li>
<li>在解码难度方面，XML的解析得考虑子节点父节点，让人头昏眼花，而JSON的解析难度几乎为0。这一点XML输的真是没话说。</li>
<li>在流行度方面，XML已经被业界广泛的使用，而JSON才刚刚开始，但是在Ajax这个特定的领域，未来的发展一定是XML让位于JSON。到时Ajax应该变成Ajaj(Asynchronous Javascript and JSON)了。</li>
<li>JSON和XML同样拥有丰富的解析手段。</li>
<li>JSON相对于XML来讲，数据的体积小。</li>
<li>JSON与JavaScript的交互更加方便。</li>
<li>JSON对数据的描述性比XML较差。</li>
<li>JSON的速度要远远快于XML。</li>
</ol>
<h3 id="数据交换格式比较之关于XML和JSON："><a href="#数据交换格式比较之关于XML和JSON：" class="headerlink" title="数据交换格式比较之关于XML和JSON："></a>数据交换格式比较之关于XML和JSON：</h3><p>　【XML】extensible markup language,一种类似于HTML的语言，他没有预先定义的标签，使用DTD(document type definition)文档类型定义来组织数据;格式统一，跨平台和语言，早已成为业界公认的标准。具体的可以问Google或百度。相比之JSON这种轻量级的数据交换格式，XML可以称为重量级的了。</p>
<p> 【JSON】JavaScript Object Notation 是一种轻量级的数据交换格式。易于人阅读和编写。同时也易于机器解析和生成。它基于JavaScript Programming Language , Standard ECMA-262 3rd Edition - December 1999 的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯(包括C, C++, C#, Java, JavaScript, Perl, Python等)。这些特性使JSON成为理想的数据交换语言。</p>
<h3 id="数据交换格式比较之关于轻量级和重量级："><a href="#数据交换格式比较之关于轻量级和重量级：" class="headerlink" title="数据交换格式比较之关于轻量级和重量级："></a>数据交换格式比较之关于轻量级和重量级：</h3><p>　　轻量级和重量级是相对来说的，那么XML相对于JSON的重量级体现在哪呢?我想应该体现在解析上，XML目前设计了两种解析方式：DOM和 SAX;<br>　　DOM是把一个数据交换格式XML看成一个DOM对象，需要把XML文件整个读入内存，这一点上JSON和XML的原理是一样的，但是XML要考虑父节点和子节点，这一点上JSON的解析难度要小很多，因为JSON构建于两种结构：key/value，键值对的集合;值的有序集合，可理解为数组;<br>　　SAX不需要整个读入文档就可以对解析出的内容进行处理，是一种逐步解析的方法。程序也可以随时终止解析。这样，一个大的文档就可以逐步的、一点一点的展现出来，所以SAX适合于大规模的解析。这一点，JSON目前是做不到得。<br>　　所以，JSON和XML的轻/重量级的区别在于：JSON只提供整体解析方案，而这种方法只在解析较少的数据时才能起到良好的效果;而XML提供了对大规模数据的逐步解析方案，这种方案很适合于对大量数据的处理。</p>
<h3 id="数据交换格式比较之关于数据格式编码及解析的难度："><a href="#数据交换格式比较之关于数据格式编码及解析的难度：" class="headerlink" title="数据交换格式比较之关于数据格式编码及解析的难度："></a>数据交换格式比较之关于数据格式编码及解析的难度：</h3><p>　　在编码上，虽然XML和JSON都有各自的编码工具，但是JSON的编码要比XML简单，即使不借助工具，也可以写出JSON代码，但要写出好的XML代码就有点困难;与XML一样，JSON也是基于文本的，且它们都使用Unicode编码，且其与数据交换格式XML一样具有可读性。<br>　　主观上来看，JSON更为清晰且冗余更少些。JSON网站提供了对JSON语法的严格描述，只是描述较简短。从总体来看，XML比较适合于标记文档，而JSON却更适于进行数据交换处理。<br>　　在解析上，在普通的web应用领域，开发者经常为XML的解析伤脑筋，无论是服务器端生成或处理XML，还是客户端用 JavaScript 解析XML，都常常导致复杂的代码，极低的开发效率。<br>　　实际上，对于大多数web应用来说，他们根本不需要复杂的XML来传输数据，XML宣称的扩展性在此就很少具有优势;许多Ajax应用甚至直接返回HTML片段来构建动态web页面。和返回XML并解析它相比，返回HTML片段大大降低了系统的复杂性，但同时缺少了一定的灵活性。同XML或 HTML片段相比，数据交换格式JSON 提供了更好的简单性和灵活性。在web serivice应用中，至少就目前来说XML仍有不可动摇的地位。</p>
<hr>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p>（这篇机会是完全参考的）</p>
<ul>
<li><a href="&quot;http://blog.sina.com.cn/s/blog_8a30865f0101amjh.html&quot;">http://blog.sina.com.cn/s/blog_8a30865f0101amjh.html</a></li>
</ul>
<hr>
<h4 id="自勉诗词"><a href="#自勉诗词" class="headerlink" title="自勉诗词"></a>自勉诗词</h4><blockquote>
<p>博闻强识而让，敦善行而不怠，谓之君子。 —《礼记·曲礼上》</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/02/19/start-develop-ios-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/02/19/start-develop-ios-1/" itemprop="url">学习ios笔记（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-02-19T00:00:00+08:00">
                2014-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>一直都想学学ios，这东东一直被说的很好，总是没有亲自去体验体验。最近用虚拟机试了下，虚拟机简单地跑起来还不算太卡，在承受范围之内。看了一半apple官方的关于ios的指导(<a href="https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOSCh/chapters/Introduction.html" title="https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOSCh/chapters/Introduction.html" target="_blank" rel="external">https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOSCh/chapters/Introduction.html</a>)，感觉收获颇多。即使是无意做ios开发，但是看看这开发文档，会让自己有个不小的提升。</p>
<h2 id="编程语言特性"><a href="#编程语言特性" class="headerlink" title="编程语言特性"></a>编程语言特性</h2><p>说实话object-c 跟其他的面向对象编程语言语法上还是有一些区别的。但是对于一个熟悉java，c++ ,c 的开发者来说，可以很快的开始入手。也可以很快地通晓这门语言的特点。有时候也能被这门语言的一些特性给深深地吸引住。它官方的开发文档上面说这门语言非常优秀，似乎没有吹牛。</p>
<h3 id="C语言的超集"><a href="#C语言的超集" class="headerlink" title="C语言的超集"></a>C语言的超集</h3><p>object-c 是c语言的超集，它比ANSI c语言多出了一下语法和功能：</p>
<ul>
<li>定义新的类</li>
<li>类和实例方法</li>
<li>方法调用(称为发消息）</li>
<li>属性声明(以及通过它们自动合成存取方法）</li>
<li>静态和动态类型化</li>
<li>块（block），已封装的、可在任何时候执行的多段代码</li>
<li>基本语言的扩展，例如协议和类别</li>
</ul>
<h3 id="类和对象以及方法"><a href="#类和对象以及方法" class="headerlink" title="类和对象以及方法"></a>类和对象以及方法</h3><p>这是面向对象语言基本通有的特性。object-c 的类和对象，以及实例，类方法等等概念，与其他面向对象语言基本类似。具体可直接看开发文档中的说明。由于object-c是c的超集，所以肯定值支持c的，它也支持C++ 代码。关于文件扩展名，其对应如下：</p>
<div>&nbsp;</div><br><div>扩展名 | 源类型 <br><br>:–|:– <br><br>.h | 头文件。包含类，类型，函数，常量的声明<br>.m | 实现文件，包含扩展名的，可以同时包含object-c 和c 代码<br>.mm | 实现文件。除了可包含object-c和c 代码外，还可以包含C++ 代码。<strong>只当您实际引用您的Object-c代码中的C++类或者功能时，才使用此扩展名。</strong><br><br></div>

<p>头文件中放的是类的声明。一个简单的例子如下：</p>
<pre><code>@interface MyCLass ：NSObject
{
    int count;
    id data;
    NSString * name;
}
-(id)initWithString:(NSString*)aName   //-表示实例方法 + 表示类方法。
+（MyClass*) createMyClassWithString:(NSString*) aName withCount: (int) count;
@end
</code></pre><p>这是.h 头文件中的声明，类的属性也可以在实现文件中声明，但是在实现文件中声明的属性，都是private 的。这个是与其他语言的不同之处，当然也可以在上面的什么中指定可见性 比如</p>
<pre><code>@public int count;
</code></pre><p>最后一个类方法的方法声明方式，让我非常喜欢，在Object-c中，多个参数分成多个部分，每个参数多有一个名称，一个一个地来。比如上面那个例子，可以直接度过来，创建MyClass 用一个String ，用一个Count。这样声明，感觉语言更加可读了。当然对于一个习惯了其他方式的多个参数的人来说，可能没有那种感觉。但是我喜欢。</p>
<p>另外一个比较有特点的是，编译器自动帮你把属性添加了get和setter 方法。</p>
<pre><code>@property (nonatomic,copy) NSString *userName;
</code></pre><p>括号中的东西时用来自定选项来配置属性。其他的选项还有weak，readonly， copy 等等。</p>
<p>方法中属性的使用是跟java中类似的： 实例.属性名</p>
<p>对于类的方法，使用的方式是通过下面这样的</p>
<pre><code>MyClass * myClass = [MyClass createMyClassWithString:@&quot;hello&quot; withCount:3];
</code></pre><h3 id="块"><a href="#块" class="headerlink" title="块"></a>块</h3><p>这是一个在c++ 和 java 中不曾出现的特性。文档上面如是说的：<strong>块</strong> 是封装工作单元的对象，即可在任何时间执行的代码段。它们在本质上是可一直的匿名函数，可作为方法和函数的参数传入，或可从方法和函数中返回。块本身具有一个已类型的参数列表，且可能具有推断或声明的返回类型。您还可以将块赋值给变量。然后就像调用函数一样调用它。</p>
<pre><code>int (^myBlock)(int) = ^(int num){ return num * multiplier;};
</code></pre><p>^是块的语法标记，我个人看法是形式上类似于匿名类。可以看出是一个变量，也可以是传参数。比匿名类还多了一个点是，还有返回值。这是一个很重要的概念。在我看的后面东西当中，这个也会涉及到。比如说出现循环引用。出现了一些未曾见过的东西，有时候让人有点兴奋。看ios开发文档，这个block确实让我特感兴趣。下面是ios开发文档上面一幅图。</p>
<p><img src="https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOSCh/chapters/WriteObjective-CCode/Art/blocks_2x.png" alt=""></p>
<p>这幅图会让你对对block的特性有一个直接性的认识。</p>
<p>&gt;</p>
<blockquote>
<p>块共享局部词法作用范围内的数据。块的这项特征非常有用，因为如果您实现一个方法，并且该方法定义一个块，则该块可以访问该方法的局部变量和参数（包括堆栈变量），以及函数和全局变量（包括实例变量）。这种访问是只读的，但如果使用 __block 修饰符声明变量，则可在块内更改其值。即使包含有块的方法或函数已返回，并且其局部作用范围已销毁，但是只要存在对该块的引用，局部变量仍作为块对象的一部分继续存在。</p>
<p>作为方法或函数参数时，块可用作回调。被调用时，方法或函数执行部分工作，并在适当时刻，通过块回调正在调用的代码，以从中请求附加信息，或获取程序特定行为。块使调用方在调用时能够提供回调代码。块从相同的词法作用范围内采集数据（就像宿主方法或函数所做的那样），而非将所需数据打包在“关联”结构中。由于块代码无需在单独的方法或函数中实现，您的实施代码会更简单且更容易理解。</p>
</blockquote>
<p>Object-C 框架具有很多包含块参数的方法。</p>
<h3 id="协议和类别"><a href="#协议和类别" class="headerlink" title="协议和类别"></a>协议和类别</h3><p>Object-C中只能够单继承。也就是说一个类只能有一个父类，但是却可以声明实现多个协议。协议和类别很像java中的接口</p>
<p>一个简单的协议的声明如下：</p>
<pre><code>@protocol MyProtocol
-（void)myProtocolMethod;
@end
</code></pre><p>类别</p>
<pre><code>@interface NSDate (NSDateCreation)
</code></pre><p>这行代码通过使用圆括号将类别名称括起来的语法约定，声明了该类别。</p>
<blockquote>
<p>类别是Object-C语言中一项功能，可让您扩展类的接口，而无需对类进行子类化。类别中的方法成为类类型的一部分（在程序作用范围内），而这些方法由类的所有子类继承。您可以将消息发送给类（或其子类）的任何实例，以调用在类别中定义的方法。</p>
</blockquote>
<h3 id="已定义的类型和编码策略"><a href="#已定义的类型和编码策略" class="headerlink" title="已定义的类型和编码策略"></a>已定义的类型和编码策略</h3><ul>
<li>id  动态对象类型。动态类型化的对象和静态类型化的对象的否定字面常量，都是 nil。</li>
<li>Class   动态类类型。其否定字面常量是 Nil。</li>
<li>SEL  选择器的数据类型 (typedef)；此数据类型表示运行时的方法签名。其否定字面常量是 NULL。</li>
<li>BOOL  Boolean 类型。字面常量值是 YES 和 NO。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2014/01/17/random-adjust-data-set-by-percent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/01/17/random-adjust-data-set-by-percent/" itemprop="url">按照比例将大数据按照类型比例，随机提取测试数据</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-01-17T00:00:00+08:00">
                2014-01-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>之前因为测试跌倒，需要数据训练，但是采集到的数据比例相差极大，非摔倒的容易采集，但是摔倒的数据比较麻烦。还要采集很多假摔的数据，这样导致最后摔倒，非摔倒，假摔的比例严重出现问题，最终影响训练效果。所以我需要将数据按照比例，从原始数据中提取数据来训练。并且我还得保证能够训练的数据量最大。尽量少删除数据。</p>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>我想到的方法就是从利用n选m 的随机数的方式。时间是O(n)。但是有个前提条件是知道数据集的大小,每个类别的数量大小。另外首先利用比例计算出每个类别最后的数量。</p>
<p>先说一下计算移除数据的方式。</p>
<pre><code>s1. 利用选择标志的方式，选出按照比例最小的类别，用smallest_index记录。初始化smallest_index=0.percent 表示最后的比例。from[] 表示原始的数据中每个类别的数据量
s2. 遍历i =[0 , size) size 表示总共的类别数 ，如果 i 的数据量 / smallest_index 的数据量 &lt; percent[i] /percent[smallest_index] 说明i 是比smallest_index 比例更小的类别。用smallest_index = i ;
s3. 利用smallest_index 遍历 i = [0,size). 计算remove[] 的数量：
remove[i] = from[i] - (from[smallest_index] * percent[i] / percent[smallest_index]).
</code></pre><p>然后根据移除的数据量，来得到按照比例的训练集。<br>    s1. 从文件中读取一条记录record，<br>    s2. if(record.is_empty) 转到s6.<br>    s3. 根据record的类型，转化为int 型的数据 i .<br>    s4. 判断remove[i] &gt; 0 &amp;&amp; rand() % sourcetemp[i] &lt; remove[i] 为真，则remove[i]–. 否则将record写入输出文件中。<br>    s5. sourcetemp[i]– . 返回s1.<br>    s6. 退出</p>
<p>源代码如下：</p>
<pre><code>/**
 * 将from 的数据 按照percent 的比例缩放。 去除其中数据
 */
void adjustNumsByPercentage(int&amp; from[],int&amp; remove[] ,const float percent[],int size ){
    int smallest_index = 0 ;
    for(int i = 0 ; i != size ; ++ i){
        if(from[i] / from[smallest_index] &lt; percent[i] / percent[smallest_index] ){
            smallest_index = i ;
        }
    }
    for(int i = 0 ; i != size ; ++ i){
        remove[i] = from[i] - ( from[smallest_index] * percent[i] / percent[smallest_index]) ;
    }

}
</code></pre><p>分类写入的代码：</p>
<pre><code>void RandomAdjustDataSet::adjust(){
    DataRecord record = reader-&gt;ReadRecordFromFile() ;
    int removetemp [3];
    int sourcetemp [3];
    memcpy(removetemp,remove_nums,3 * sizeof(int));
    memcpy(sourcetemp,source_nums,3 * sizeof(int));

    srand(time(0));
    while(!record.is_empty){
        int i = 1;
        if(record.activity == &quot;1&quot;){
            i = 1;
        }else if(record.activity == &quot;2&quot;){
            i = 2;
        }else{
            i = 3;
        }

        if(removetemp[i-1] &gt;0 &amp;&amp; rand() % sourcetemp[i-1] &lt; removetemp[i-1] ){
            removetemp[i-1]  -- ;
            //去除
        }else{
            //
            WriteIntoFile(out,record);
        }
        sourcetemp[i-1] --;
        record = reader-&gt;ReadRecordFromFile();
    }

    out.close();
}
</code></pre><p>当然利用取出的方式，计算每个类别取出的数量，是一样的。</p>
<h3 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h3><p>1.不知道有没有更好的方式解决这个问题？</p>
<p>2.如果不知道原始数据中，每个类别的数量，最佳算法的运行时间是怎样的？</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2013/12/19/some-random-algorithms/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/12/19/some-random-algorithms/" itemprop="url">关于基本的随机选择算法（n选m）的分析与思考</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-12-19T00:00:00+08:00">
                2013-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          关于基本的随机选择算法（n选m）
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2013/12/19/some-random-algorithms/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://houzhi.me/2013/12/05/pragmatic-unit-testing-in-java-with-junit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="houzhi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Creative ,Challenging and Cogitative">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/12/05/pragmatic-unit-testing-in-java-with-junit/" itemprop="url">单元测试之道——基于junit的java单元测试 的读书笔记与思考</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-12-05T00:00:00+08:00">
                2013-12-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          程序员三部曲
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2013/12/05/pragmatic-unit-testing-in-java-with-junit/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">houzhi</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">74</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">houzhi</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  









<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>



  





  

  

  

  
  

  

  

  

</body>
</html>
